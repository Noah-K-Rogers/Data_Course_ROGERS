library(readxl)
library(janitor)
#
# bmass <- df %>% select(-contains(c("bill","tarsus","wing","tail")))
# bbill <- df %>% select(-contains(c("tarsus","wing","tail","mass")))
# btarsus <- df %>% select(-contains(c("bill","wing","tail","mass")))
# bwing <- df %>% select(-contains(c("bill","tarsus","tail","mass")))
# btail <- df %>% select(-contains(c("bill","tarsus","wing","mass")))
# bmass %>% pivot_longer(starts_with(c("m_","f_", "unsexed_")),names_to = "gender", values_to = "mass")
#
#
i <- 1
paste("xzy", as.character(i)
paste("xzy", as.character(i))
paste("xzy", as.character(i))
paste("xzy", as.character(i),sep = "")
mutate(paste("xzy", as.character(i),sep = "") = exclude[i])
df %>% mutate(paste("xzy", as.character(i),sep = "") = exclude[i])
df <- read_csv("./Data/Bird_Measurements.csv") %>% clean_names()
df <- df %>% select(-ends_with("_n"))
patterns <- c("mass","wing","tarsus","tail","bill")
exclude <- "egg_mass"
#
# bmass <- df %>% select(-contains(c("bill","tarsus","wing","tail")))
# bbill <- df %>% select(-contains(c("tarsus","wing","tail","mass")))
# btarsus <- df %>% select(-contains(c("bill","wing","tail","mass")))
# bwing <- df %>% select(-contains(c("bill","tarsus","tail","mass")))
# btail <- df %>% select(-contains(c("bill","tarsus","wing","mass")))
# bmass %>% pivot_longer(starts_with(c("m_","f_", "unsexed_")),names_to = "gender", values_to = "mass")
#
#
i <- 1
df %>% rename(exclude[i], as.character(paste("xzy",i)))
?rename
df %>% rename(as.character(paste("xzy",i, sep = "")) = exclude[i])
rename(as.character(paste("xzy",i, sep = "")), exclude[i])
df %>% rename(paste("xzy",i, sep = ""), exclude[i])
df %>% rename(paste("xzy",i, sep = "") = exclude[i])
#
# bmass <- df %>% select(-contains(c("bill","tarsus","wing","tail")))
# bbill <- df %>% select(-contains(c("tarsus","wing","tail","mass")))
# btarsus <- df %>% select(-contains(c("bill","wing","tail","mass")))
# bwing <- df %>% select(-contains(c("bill","tarsus","tail","mass")))
# btail <- df %>% select(-contains(c("bill","tarsus","wing","mass")))
# bmass %>% pivot_longer(starts_with(c("m_","f_", "unsexed_")),names_to = "gender", values_to = "mass")
#
#
i <- 1
df %>% rename(xyz1 = exclude[i])
df %>% rename("xyz1" = exclude[i])
df %>% rename(paste("xyz","1") = exclude[i])
df %>% rename(paste0("xyz","1") = exclude[i])
#
# bmass <- df %>% select(-contains(c("bill","tarsus","wing","tail")))
# bbill <- df %>% select(-contains(c("tarsus","wing","tail","mass")))
# btarsus <- df %>% select(-contains(c("bill","wing","tail","mass")))
# bwing <- df %>% select(-contains(c("bill","tarsus","tail","mass")))
# btail <- df %>% select(-contains(c("bill","tarsus","wing","mass")))
# bmass %>% pivot_longer(starts_with(c("m_","f_", "unsexed_")),names_to = "gender", values_to = "mass")
#
#
name <- "xyz1"
df %>% rename(name = exclude[i])
#
# bmass <- df %>% select(-contains(c("bill","tarsus","wing","tail")))
# bbill <- df %>% select(-contains(c("tarsus","wing","tail","mass")))
# btarsus <- df %>% select(-contains(c("bill","wing","tail","mass")))
# bwing <- df %>% select(-contains(c("bill","tarsus","tail","mass")))
# btail <- df %>% select(-contains(c("bill","tarsus","wing","mass")))
# bmass %>% pivot_longer(starts_with(c("m_","f_", "unsexed_")),names_to = "gender", values_to = "mass")
#
#
name <- c(paste0("xyz","1") = exclude[i])
#
# bmass <- df %>% select(-contains(c("bill","tarsus","wing","tail")))
# bbill <- df %>% select(-contains(c("tarsus","wing","tail","mass")))
# btarsus <- df %>% select(-contains(c("bill","wing","tail","mass")))
# bwing <- df %>% select(-contains(c("bill","tarsus","tail","mass")))
# btail <- df %>% select(-contains(c("bill","tarsus","wing","mass")))
# bmass %>% pivot_longer(starts_with(c("m_","f_", "unsexed_")),names_to = "gender", values_to = "mass")
#
# \
typeof(df$egg_mass)
name <- list(paste0("xyz","1") = exclude[i])
df %>% rename(paste0("xyz",i) := exclude[i])
df <- df %>% rename_with(~paste0("xyz",i) , exclude[i])
patterns <- c("mass","wing","tarsus","tail","bill")
exclude <- "egg_mass"
df <- read_csv("./Data/Bird_Measurements.csv") %>% clean_names()
df <- df %>% select(-ends_with("_n"))
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename(~paste0("xzy",i), exclude[i])
}
}
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
tempdf <- list()
for(i in 1:length(patterns)){
tempdf[[i]] <- df %>%
select(-contains(patterns[patterns != patterns[i]])) %>%
pivot_longer(contains(patterns[i]),values_to = patterns[i],names_to = "names") %>%
mutate(names = str_remove(names,patterns[i]))
}
df <- Reduce(full_join, tempdf)
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
pivot_longer_multiple <- function(df,patterns,exclude = NA){
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
tempdf <- list()
for(i in 1:length(patterns)){
tempdf[[i]] <- df %>%
select(-contains(patterns[patterns != patterns[i]])) %>%
pivot_longer(contains(patterns[i]),values_to = patterns[i],names_to = "names") %>%
mutate(names = str_remove(names,patterns[i]))
}
df <- Reduce(full_join, tempdf)
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
}
pivot_longer_multiple <- function(df,patterns,exclude = NA){
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
tempdf <- list()
for(i in 1:length(patterns)){
tempdf[[i]] <- df %>%
select(-contains(patterns[patterns != patterns[i]])) %>%
pivot_longer(contains(patterns[i]),values_to = patterns[i],names_to = "names") %>%
mutate(names = str_remove(names,patterns[i]))
}
df <- Reduce(full_join, tempdf)
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
return(df)
}
test <- pivot_longer_multiple(df,c("mass","wing","tarsus","tail","bill"),"egg_mass")
df <- read_csv("./Data/Bird_Measurements.csv") %>% clean_names()
df <- df %>% select(-ends_with("_n"))
test <- pivot_longer_multiple(df,c("mass","wing","tarsus","tail","bill"),"egg_mass")
pivot_longer_multiple <- function(df,patterns,exclude = NA){
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
tempdf <- list()
for(i in 1:length(patterns)){
tempdf[[i]] <- df %>%
select(-contains(patterns[patterns != patterns[i]])) %>%
pivot_longer(contains(patterns[i]),values_to = patterns[i],names_to = "names") %>%
mutate(names = str_remove(names,patterns[i]))
}
df <- Reduce(full_join, tempdf)
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
return(df)
}
test <- pivot_longer_multiple(df,c("mass","wing","tarsus","tail","bill"),"egg_mass")
source("~/Desktop/Data_Course_ROGERS/Code_Examples/clean_the_bp_data.R", echo=TRUE)
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
library(tidyverse)
clean_names
fix_names <- function(df,pattern,exclude = NA){
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
for(name in pattern){
tempvec <- names(df)[contains(name)]
for(i in 1:length(tempvec)){
df <- df %>% rename_with(~paste0(name,i), tempvec[i])
}
}
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
}
pivot_longer_multiple <- function(df,patterns,exclude = NA){
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
tempdf <- list()
for(i in 1:length(patterns)){
tempdf[[i]] <- df %>%
select(-contains(patterns[patterns != patterns[i]])) %>%
pivot_longer(contains(patterns[i]),values_to = patterns[i],names_to = "names") %>%
mutate(names = str_remove(names,patterns[i]))
}
df <- Reduce(full_join, tempdf)
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
return(df)
}
df <- df %>% fix_names(c("bp","hr"))
pattern <- c("hr","bp")
for(name in pattern){
tempvec <- names(df)[names(df) %in% name]
for(i in 1:length(tempvec)){
df <- df %>% rename_with(~paste0(name,i), tempvec[i])
}
}
read_xlsx
read_csv
grepl(name,names(df))
subset(names(df), grepl(name,names(df)))
tempvec <- subset(names(df), grepl(name,names(df)))
for(i in 1:length(tempvec)){
df <- df %>% rename_with(~paste0(name,i), tempvec[i])
}
fix_names <- function(df,pattern,exclude = NA){
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
for(name in pattern){
tempvec <- subset(names(df), grepl(name,names(df)))
for(i in 1:length(tempvec)){
df <- df %>% rename_with(~paste0(name,i), tempvec[i])
}
}
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
}
df <- df %>% fix_names(c("bp","hr"))
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
df <- df %>% fix_names(c("bp","hr"))
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
df <- df %>% fix_names(c("bp","hr"))
fix_names <- function(df,pattern,exclude = NA){
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
for(name in pattern){
tempvec <- subset(names(df), grepl(name,names(df)))
for(i in 1:length(tempvec)){
df <- df %>% rename_with(~paste0(name,i), tempvec[i])
}
}
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
return(df)
}
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
df <- df %>% fix_names(c("bp","hr"))
# dffull <- dfbp %>% mutate(heart_rate = dfhr$heart_rate)
# dffull <- dffull %>%  separate(blood_pressure, into = c("systolic","diastolic"),convert = TRUE)
#
# dffull <- dffull %>% mutate(birthdate = as.POSIXct(paste(year_birth,month_of_birth,day_birth,sep="-")))
#
# dffull <- dffull %>%  mutate(race = case_when(race == "WHITE"~ "White",
#                                     race == "Caucasian"~"White",
#                                     TRUE~race))
#
# saveRDS(dffull,"./Code_Examples/cleaned_bp.rds")
test <- df %>% pivot_longer_multiple(c("bp","hr"))
test %>% rename(visit = names)
test %>% rename(visit = names) %>%
mutate(visit = visits[visit])
visits <- read_xlsx("./Data/messy_bp.xlsx", skip = 2,n_max = 0) %>% select(-starts_with("...")) %>% names()
test %>% rename(visit = names) %>%
mutate(visit = visits[visit])
test %>% rename(visit = names) %>%
mutate(visit = visits[as.numeric(visit)])
df <- read_csv("./Data/Bird_Measurements.csv") %>% clean_names()
df <- read_csv("./Data/Bird_Measurements.csv") %>% clean_names()
df <- df %>% select(-ends_with("_n"))
df <- df %>% fix_names(c("mass","tail","wing","tarsus","bill"), "egg_mass")
df <- read_csv("./Data/Bird_Measurements.csv") %>% clean_names()
df <- df %>% select(-ends_with("_n"))
df <- df %>% fix_names(c("mass","tail","wing","tarsus","bill"), "egg_mass")
test <- pivot_longer_multiple(df,c("mass","wing","tarsus","tail","bill"),"egg_mass")
goal <- read.csv("./Data/cleaned_bird_data.csv") %>% clean_names()
test <- test %>% mutate(gender = case_when(names == "1" ~ "Male",
names == "2" ~ "Female",
names == "3" ~ "Unsexed"))
test == goal
test <- test %>% mutate(gender = case_when(names == "1" ~ "Male",
names == "2" ~ "Female",
names == "3" ~ "Unsexed")) %>%
select(-names)
test == goal
observed <- c(122,6,4,124)
observed <- c(122,6,4,124)
expected <- c(64,64,64,64)
oe <- observed-expected
oe2 <- oe*oe
chi <- sum(oe./expected)
chi <- sum(oe2/expected)
10/2556
10/256
6/170
784+790+149+144+68+70+3+6
68+70+3+6
149+144+3+6
147/2014
302/2014
147/2014 + 302/2014
a<- 147/2014 + 302/2014
a*2014
a<- 147/2014 * 302/2014
a*2014
9/22
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
pivot_longer_multiple <- function(df,patterns,exclude = NA, fix_names = FALSE){
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~paste0("xzy",i), exclude[i])
}
}
if(fix_names == TRUE){
for(name in patterns){
tempvec <- subset(names(df), grepl(name,names(df)))
for(i in 1:length(tempvec)){
df <- df %>% rename_with(~paste0(name,i), tempvec[i])
}
}
}
tempdf <- list()
for(i in 1:length(patterns)){
tempdf[[i]] <- df %>%
select(-contains(patterns[patterns != patterns[i]])) %>%
pivot_longer(contains(patterns[i]),values_to = patterns[i],names_to = "names") %>%
mutate(names = str_remove(names,patterns[i]))
}
df <- Reduce(full_join, tempdf)
if(is.na(exclude)==FALSE){
for (i in 1:length(exclude)) {
df <- df %>% rename_with(~exclude[i], paste0("xzy",i))
}
}
return(df)
}
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
# dffull <- dfbp %>% mutate(heart_rate = dfhr$heart_rate)
# dffull <- dffull %>%  separate(blood_pressure, into = c("systolic","diastolic"),convert = TRUE)
#
# dffull <- dffull %>% mutate(birthdate = as.POSIXct(paste(year_birth,month_of_birth,day_birth,sep="-")))
#
# dffull <- dffull %>%  mutate(race = case_when(race == "WHITE"~ "White",
#                                     race == "Caucasian"~"White",
#                                     TRUE~race))
#
# saveRDS(dffull,"./Code_Examples/cleaned_bp.rds")
test <- df %>% pivot_longer_multiple(c("bp","hr"),fix_names = TRUE)
test %>% rename(visit = names) %>%
mutate(visit = visits[as.numeric(visit)])
library(tidyverse)
library(janitor)
library(readxl)
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
visits <- read_xlsx("./Data/messy_bp.xlsx", skip = 2,n_max = 0) %>% select(-starts_with("...")) %>% names()
# dfbp <- df %>% select(-starts_with("HR")) %>% pivot_longer(cols =starts_with("bp"), values_to = "blood_pressure",names_to = "visit")
# dfhr <- df %>% select(-starts_with("bp")) %>% pivot_longer(cols =starts_with("hr"), values_to = "heart_rate",names_to = "visit")
# dfbp <- dfbp %>% mutate(visit = visits[(as.numeric(str_remove(visit, "bp_"))-6)/2])
# dfhr <- dfhr %>% mutate(visit = visits[(as.numeric(str_remove(visit, "bp_"))-7)/2])
# dffull <- dfbp %>% mutate(heart_rate = dfhr$heart_rate)
# dffull <- dffull %>%  separate(blood_pressure, into = c("systolic","diastolic"),convert = TRUE)
#
# dffull <- dffull %>% mutate(birthdate = as.POSIXct(paste(year_birth,month_of_birth,day_birth,sep="-")))
#
# dffull <- dffull %>%  mutate(race = case_when(race == "WHITE"~ "White",
#                                     race == "Caucasian"~"White",
#                                     TRUE~race))
#
# saveRDS(dffull,"./Code_Examples/cleaned_bp.rds")
test <- df %>% pivot_longer_multiple(c("bp","hr"),fix_names = TRUE)
test %>% rename(visit = names) %>%
mutate(visit = visits[as.numeric(visit)])
library(tidyverse)
library(janitor)
library(readxl)
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
visits <- read_xlsx("./Data/messy_bp.xlsx", skip = 2,n_max = 0) %>% select(-starts_with("...")) %>% names()
# dfbp <- df %>% select(-starts_with("HR")) %>% pivot_longer(cols =starts_with("bp"), values_to = "blood_pressure",names_to = "visit")
# dfhr <- df %>% select(-starts_with("bp")) %>% pivot_longer(cols =starts_with("hr"), values_to = "heart_rate",names_to = "visit")
# dfbp <- dfbp %>% mutate(visit = visits[(as.numeric(str_remove(visit, "bp_"))-6)/2])
# dfhr <- dfhr %>% mutate(visit = visits[(as.numeric(str_remove(visit, "bp_"))-7)/2])
# dffull <- dfbp %>% mutate(heart_rate = dfhr$heart_rate)
# dffull <- dffull %>%  separate(blood_pressure, into = c("systolic","diastolic"),convert = TRUE)
#
# dffull <- dffull %>% mutate(birthdate = as.POSIXct(paste(year_birth,month_of_birth,day_birth,sep="-")))
#
# dffull <- dffull %>%  mutate(race = case_when(race == "WHITE"~ "White",
#                                     race == "Caucasian"~"White",
#                                     TRUE~race))
#
# saveRDS(dffull,"./Code_Examples/cleaned_bp.rds")
test <- df %>% pivot_longer_multiple(c("bp","hr"),fix_names = TRUE)
library(tidyverse)
library(janitor)
library(readxl)
source("./Code_Examples/pivot_multiple.R")
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
visits <- read_xlsx("./Data/messy_bp.xlsx", skip = 2,n_max = 0) %>% select(-starts_with("...")) %>% names()
# dfbp <- df %>% select(-starts_with("HR")) %>% pivot_longer(cols =starts_with("bp"), values_to = "blood_pressure",names_to = "visit")
# dfhr <- df %>% select(-starts_with("bp")) %>% pivot_longer(cols =starts_with("hr"), values_to = "heart_rate",names_to = "visit")
# dfbp <- dfbp %>% mutate(visit = visits[(as.numeric(str_remove(visit, "bp_"))-6)/2])
# dfhr <- dfhr %>% mutate(visit = visits[(as.numeric(str_remove(visit, "bp_"))-7)/2])
# dffull <- dfbp %>% mutate(heart_rate = dfhr$heart_rate)
# dffull <- dffull %>%  separate(blood_pressure, into = c("systolic","diastolic"),convert = TRUE)
#
# dffull <- dffull %>% mutate(birthdate = as.POSIXct(paste(year_birth,month_of_birth,day_birth,sep="-")))
#
# dffull <- dffull %>%  mutate(race = case_when(race == "WHITE"~ "White",
#                                     race == "Caucasian"~"White",
#                                     TRUE~race))
#
# saveRDS(dffull,"./Code_Examples/cleaned_bp.rds")
test <- df %>% pivot_longer_multiple(c("bp","hr"),fix_names = TRUE)
library(tidyverse)
library(janitor)
library(readxl)
source("./Code_Examples/pivot_multiple.R")
df <- read_xlsx("./Data/messy_bp.xlsx", skip=3) %>% clean_names()
visits <- read_xlsx("./Data/messy_bp.xlsx", skip = 2,n_max = 0) %>% select(-starts_with("...")) %>% names()
# dfbp <- df %>% select(-starts_with("HR")) %>% pivot_longer(cols =starts_with("bp"), values_to = "blood_pressure",names_to = "visit")
# dfhr <- df %>% select(-starts_with("bp")) %>% pivot_longer(cols =starts_with("hr"), values_to = "heart_rate",names_to = "visit")
# dfbp <- dfbp %>% mutate(visit = visits[(as.numeric(str_remove(visit, "bp_"))-6)/2])
# dfhr <- dfhr %>% mutate(visit = visits[(as.numeric(str_remove(visit, "bp_"))-7)/2])
# dffull <- dfbp %>% mutate(heart_rate = dfhr$heart_rate)
# dffull <- dffull %>%  separate(blood_pressure, into = c("systolic","diastolic"),convert = TRUE)
#
# dffull <- dffull %>% mutate(birthdate = as.POSIXct(paste(year_birth,month_of_birth,day_birth,sep="-")))
#
# dffull <- dffull %>%  mutate(race = case_when(race == "WHITE"~ "White",
#                                     race == "Caucasian"~"White",
#                                     TRUE~race))
#
# saveRDS(dffull,"./Code_Examples/cleaned_bp.rds")
test <- df %>% pivot_longer_multiple(c("bp","hr"),fix_names = TRUE)
test %>% rename(visit = names) %>%
mutate(visit = visits[as.numeric(visit)])
# dffull <- dfbp %>% mutate(heart_rate = dfhr$heart_rate)
# dffull <- dffull %>%  separate(blood_pressure, into = c("systolic","diastolic"),convert = TRUE)
#
# dffull <- dffull %>% mutate(birthdate = as.POSIXct(paste(year_birth,month_of_birth,day_birth,sep="-")))
#
# dffull <- dffull %>%  mutate(race = case_when(race == "WHITE"~ "White",
#                                     race == "Caucasian"~"White",
#                                     TRUE~race))
#
# saveRDS(dffull,"./Code_Examples/cleaned_bp.rds")
test <- df %>% pivot_longer_multiple(c("bp","hr"),fix_names = TRUE) %>% rename(visit = names) %>%
mutate(visit = visits[as.numeric(visit)])
library(tidyverse)
library(readxl)
library(janitor)
source("./Code_Examples/pivot_multiple.R")
goal <- read.csv("./Data/cleaned_bird_data.csv") %>% clean_names()
df <- read_csv("./Data/Bird_Measurements.csv") %>% clean_names()
df <- df %>% select(-ends_with("_n"))
pattern <- c("hr","bp")
test <- pivot_longer_multiple(df,c("mass","wing","tarsus","tail","bill"),"egg_mass")
test <- test %>% mutate(gender = case_when(names == "m_" ~ "Male",
names == "f_" ~ "Female",
names == "unsexed_" ~ "Unsexed")) %>%
select(-names)
library(tidyverse)
library(readxl)
library(janitor)
source("./Code_Examples/pivot_multiple.R")
goal <- read.csv("./Data/cleaned_bird_data.csv") %>% clean_names()
df <- read_csv("./Data/Bird_Measurements.csv") %>% clean_names()
df <- df %>% select(-ends_with("_n"))
test <- pivot_longer_multiple(df,c("mass","wing","tarsus","tail","bill"),"egg_mass")
test <- test %>% mutate(gender = case_when(names == "m_" ~ "Male",
names == "f_" ~ "Female",
names == "unsexed_" ~ "Unsexed")) %>%
select(-names)
order(test)
arrange(test,family)
tail(arrange(test,family))
arrange(test,family) == arrange(goal,family)
